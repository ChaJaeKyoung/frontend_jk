<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <input type="file">
  <!-- <input type="file" multiple> 여러개  -->


  <script>
    // 문제5
    // 문자열 객체를 이용하여 파일 확장자를 추출해서 fileExt 변수에 저장하고,
    // 이미지 파일(jpg, png, gif)이 맞는지 검사하여
    // 아닐 경우에만 alert() 창을 띄워 경고하기.

    // 샘플 코드
    // const imgFileExt = ['jpg', 'png', 'gif'];
    // let fileExt;
    // const fileInput = document.querySelector('input[type=file]');
    // fileInput.addEventListener('change', function () {
    //   // debugger; 디버깅모드로 들어갈 수 있다 화살표를 눌러야 콘솔로 넘어갔다
    //   console.log(fileInput);
    //   console.log(fileInput.files);
    //   console.log(fileInput.files[0]);
    // });

    // 풀이5
    const imgFileExt = ['jpg', 'png', 'gif', 'jpeg'];
    let fileName;
    let searchExt;
    
    const fileInput = document.querySelector('input[type=file]');
    fileInput.addEventListener('change',function() {
      // debugger;
      // console.log(fileInput);
      // console.log(fileInput.files);
      // console.log(fileInput.files[0].name);
      fileName = fileInput.files[0].name;
      // console.log(fileName);
      
      //searchExt = fileName.substr(fileName.length - 3,3); //4글자 확장자는 검색할 수 없는 문제 발생
      let checkIndex = fileName.lastIndexOf('.') + 1; // .부터 가지고 오기 때문에 +1 을 해 줘야 함
      searchExt= fileName.substr(checkIndex).toLowerCase();// 끝에 확장자 추출 및 소문자로 변경
      console.log(searchExt);

      // includes 메서드 쓰기 전 
      // let check = [];
      // for(let i = 0; i < imgFileExt.length; i++) {
      //   if (searchExt == imgFileExt[i]) {
      //     check[i] = true;
      //   }  
      // }
      // console.log(check[0]);
      // console.log(check[1]);
      // console.log(check[2]);
      // console.log(check[3]);
      // if ( check[0] || check[1] || check[2] || check[3]) {
      //   alert('good!');
      // } else {
      //   alert('확장자를 확인 해 주세요!');
      // }

      // includes 메서드 쓴 후
      if(!imgFileExt.includes(searchExt)){
        alert('확장자를 확인 해 주세요!');
      }
    })

    //0. check에 담겨진 true 값을 파일을 넣을 때마다 리셋해야 되므로 지역변수로 선언
    //1.파일명에서 끝에 세자리 추출 , 
      // +)파일명에서 마지막 확장자 추출로 수정해야됨!! JPEG 같은 파일때문에 4글자일 경우도 있음 
      //   =>'.' 뒤에 있는 글자부터 끝까지 추출 해야됨 : ltext.lastIndexOf('검색글자',검색시작위치지정) 사용 할 예정 왜냐하면 파일 이름 중간에도 '.'이 들어갈 수 있기 때문에 맨 뒤에서부터 검색해야됨!
      // +) substr (가져올인덱스시작,몇개?) => 몇개자리에 생략이 되면 끝까지 다 가져옴
      // +)확장자가 대문자 소문자일 경우에 하나로 통일 => 난 소문자로 통일 할 예정 text.toLowerCase()
    //2.이미지파일확장자랑 비교 하드코딩(X) => 검색기능 배열 메서드 활용하면 간편해짐!! 검색할집단.includes(검색어)
    
  </script>
</body>
</html>